"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Enemy=function(x,y){this.sprite="images/enemy-bug.png",this.x=x,this.y=y,this.speed=getRandomInt(10)};function getRandomInt(max){return Math.floor(Math.random()*Math.floor(max))}Enemy.prototype.update=function(dt){this.x<600?this.x+=this.speed:this.x=-100,hasCollided()},Enemy.prototype.hasCollided=function(){player.x<this.x+60&&player.x+37>this.x&&player.y<this.y+25&&30+player.y>this.y&&(player.x=200,player.y=380,document.querySelector("body").style.backgroundColor="red",setTimeout(function(){document.querySelector("body").style.backgroundColor="white"},200))},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Player=function(){function Player(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,src=arguments[2];_classCallCheck(this,Player),this.x=x,this.y=y,this.sprite=new Image,this.sprite.src=src}return _createClass(Player,[{key:"update",value:function(){this.sprite.src="images/"+charObj.selectedChar+".png",ctx.drawImage(this.sprite,this.x,this.y)}},{key:"render",value:function(){ctx.drawImage(this.sprite,this.x,this.y)}},{key:"handleInput",value:function(keyCode){switch(keyCode){case"up":this.y-=0<this.y?85:0;break;case"down":this.y+=this.y<300?85:0;break;case"right":this.x+=this.x<400?100:0;break;default:this.x-=0<this.x?100:0}}}]),Player}(),charObj={selectedChar:"",isInitialized:!1},setupCharacterSelect=new Modal("select-character");charObj.selectedChar=setupCharacterSelect.selectCharacterModal(charObj),setupCharacterSelect.show(),!1===charObj.isInitialized&&(charObj.selectedChar="char-horn-girl",document.getElementById("selected-char").innerHTML=charObj.selectedChar);for(var player=new Player(200,295,"images/"+charObj.selectedChar+".png"),allEnemies=[],k=0;k<3;k++){var bug=new Enemy(-100,60+85*k);allEnemies.push(bug)}for(var _k=1;_k<3;_k++){var _bug=new Enemy(-100,60+85*_k);allEnemies.push(_bug),player.hasCollided()&&alert("hasCollided")}document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var Engine=function(){var global=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this,doc=global.document,win=global.window,canvas=doc.createElement("canvas"),ctx=canvas.getContext("2d"),lastTime=void 0;function main(){var now=Date.now();!function(dt){!function(dt){allEnemies.forEach(function(enemy){enemy.update(dt)}),player.update()}(dt)}((now-lastTime)/1e3),function(){var rowImages=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"],row=void 0,col=void 0;for(ctx.clearRect(0,0,canvas.width,canvas.height),row=0;row<6;row++)for(col=0;col<5;col++)ctx.drawImage(Resources.get(rowImages[row]),101*col,83*row);allEnemies.forEach(function(enemy){enemy.render()}),player.render()}(),lastTime=now,win.requestAnimationFrame(main)}setTimeout(function(){canvas.width=505,canvas.height=606,doc.body.appendChild(canvas)},1500),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png"]),Resources.onReady(function(){lastTime=Date.now(),main()}),global.ctx=ctx}(void 0);!function(){var resourceCache={},readyCallbacks=[];function _load(url){if(resourceCache[url])return resourceCache[url];var img=new Image;img.onload=function(){resourceCache[url]=img,isReady()&&readyCallbacks.forEach(function(func){func()})},resourceCache[url]=!1,img.src=url}function isReady(){var ready=!0;for(var k in resourceCache)resourceCache.hasOwnProperty(k)&&!resourceCache[k]&&(ready=!1);return ready}window.Resources={load:function(urlOrArr){urlOrArr instanceof Array?urlOrArr.forEach(function(url){_load(url)}):_load(urlOrArr)},get:function(url){return resourceCache[url]},onReady:function(func){readyCallbacks.push(func)},isReady:isReady}}();