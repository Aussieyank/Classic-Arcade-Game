"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Enemy=function(){this.sprite="images/enemy-bug.png"};Enemy.prototype.update=function(dt){},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Player=function(){function Player(){_classCallCheck(this,Player)}return _createClass(Player,[{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"handleInput",value:function(){}}]),Player}(),player=new Player,allEnemies=[];document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var setupGame=new Modal("select-character"),selectedChar=setupGame.startModal();setupGame.show(),alert("insideApp: "+selectedChar),document.getElementById("selected-char").innerHTML=selectedChar;var Engine=function(){var global=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this,doc=global.document,win=global.window,canvas=doc.createElement("canvas"),ctx=canvas.getContext("2d"),lastTime=void 0;function main(){var now=Date.now();!function(dt){!function(dt){allEnemies.forEach(function(enemy){enemy.update(dt)}),player.update()}(dt)}((now-lastTime)/1e3),function(){var rowImages=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"],row=void 0,col=void 0;for(ctx.clearRect(0,0,canvas.width,canvas.height),row=0;row<6;row++)for(col=0;col<5;col++)ctx.drawImage(Resources.get(rowImages[row]),101*col,83*row);allEnemies.forEach(function(enemy){enemy.render()}),player.render()}(),lastTime=now,win.requestAnimationFrame(main)}canvas.width=505,canvas.height=606,doc.body.appendChild(canvas),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png"]),Resources.onReady(function(){lastTime=Date.now(),main()}),global.ctx=ctx}(void 0);!function(){var resourceCache={},readyCallbacks=[];function _load(url){if(resourceCache[url])return resourceCache[url];var img=new Image;img.onload=function(){resourceCache[url]=img,isReady()&&readyCallbacks.forEach(function(func){func()})},resourceCache[url]=!1,img.src=url}function isReady(){var ready=!0;for(var k in resourceCache)resourceCache.hasOwnProperty(k)&&!resourceCache[k]&&(ready=!1);return ready}window.Resources={load:function(urlOrArr){urlOrArr instanceof Array?urlOrArr.forEach(function(url){_load(url)}):_load(urlOrArr)},get:function(url){return resourceCache[url]},onReady:function(func){readyCallbacks.push(func)},isReady:isReady}}();